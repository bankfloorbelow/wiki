# 6. Cмартконтракты и DApps, блокчейн и деньги

Tags: Done
Person: @Irina Storchak 
Video: https://youtu.be/PFNWYWQ2Qyk
Дата готовности / публикации: ~20/12 / …

Лекция “Смарт-контракты и DApps, блокчейн и деньги” состоит из двух частей: сначала Гари Ганслер коснется технологической стороны , а после **Ларри Лесси** рассмотрит законодательную и юридическую сторону.

Содержание:

- Смарт-контракты
- Особенности технологического дизайна
- Хеш-функции и древо Меркла
- DApps и токенсейл
- Юридические вопросы

В первой части лекции рассмотрим что такое смарт-контракты, как они относятся и сравниваются с обыкновенными контрактами, также что такое токены и как они используются внутри этой экосистемы.

Здесь же познакомимся с существующими платформами для смарт-контрактов и надстроенными на них другие DApps. 

Полезные статьи:

- Smart Contracts: 12 Use Cases for Business & Beyond - of Digital Commerce

[https://www.perkinscoie.com/images/content/1/6/v2/164979/Smart-Contracts-12-Use-Cases-for-Business-Beyond.pdf](https://www.perkinscoie.com/images/content/1/6/v2/164979/Smart-Contracts-12-Use-Cases-for-Business-Beyond.pdf)

- **State of the DApps: 5 Observations From Usage Data (April 2018)** [Chris McCann](https://medium.com/@mccannatron?source=post_page-----a3e9da01bc22--------------------------------)

[https://medium.com/@mccannatron/state-of-the-dapps-5-observations-from-usage-data-april-2018-a3e9da01bc22](https://medium.com/@mccannatron/state-of-the-dapps-5-observations-from-usage-data-april-2018-a3e9da01bc22)

- **Ethereum Competitors: Guide to the Alternative Smart Contract Platforms**
[https://blockonomi.com/ethereum-competitors/](https://blockonomi.com/ethereum-competitors/)
- **Smart Contracts: Building Blocks for Digital Markets 1996 by Nick Szabo**
[https://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart_contracts_2.html](https://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/smart_contracts_2.html)
- Blockchain Technology as a Regulatory Technology De Filippi & Samer Hassan
[https://arxiv.org/pdf/1801.02507.pdf](https://arxiv.org/pdf/1801.02507.pdf)

### Что такое смарт контракты?

На первый вопрос можно ответить достаточно коротко:
“Набор **обещаний**,

который записан в **цифровой форме**,

включающий в себя **протоколы**.

Участники этого смарт-контракта далее оперируют в соответствие этим цифровым обещаниям”

1996  Nick Szabo

Также стоит отметить, что смарт-контракты не буквально “умные”, правильнее их было бы назвать даже “глупыми”. То есть о них не стоит думать как, например, об искусственном интеллекте, а скорее как о **наборе функций**, которые исполняются. Можно сказать, что смарт-контракты **оптимизируют** то, что механически могли бы сделать и люди.

Во второй части лекции дополнительно рассмотрим то, что смарт-контракты могут не являться контрактами вовсе.

### Что такое платформы смарт-контрактов такие как Эфириум? Что в целом отличает их от Биткоинов?

Рассмотрим технические особенности - их всего три в блокчейне:

- Криптография

У биткоина и эфириума почти одинаковые технологии криптографии – есть хеши и есть временные отметки, заголовки блоков, древо меркла.

Однако вот отличие - в Эфириуеме есть несколько древ меркла, а в Битокине есть только одно.

- Консенсус децентрализизованной сети

Эфириум использует для своего консенсуса proof-of-work, несмотря на то, что на текущий момент ведутся разговоры о переходе на технологию proof-of-stake.

Также у Эфириума есть нативная валюта - она называется ETH (не биткоин), и здесь присутствует сеть.

- Формат транзакций и скрипт

У Эфира нет скрипта транзакций или так называемого UTXO. То есть здесь Виталик Бутерин решил использовать другую технологию по сравнению с биткоином

Вместо использования входные и выходных данных транзакций, используется переход состояний.

Технические особенности Биткоина и Эфириума. Сравнительная таблица

| Bitcoin - Technical Features  | Ethereum |
| --- | --- |
| Cryptography & Timestamped Logs | Yes |
| Cryptographic hash functions  | ✔️ |
| Timestamped Append-only Log (Blocks) | ✔️ |
| Block headers & Merkle Trees   | ✔️✔️ |
| Asymmetric cryptography & Digital Signatures | ✔️ |
| Addresses | ✔️ |
| Decentralized network consensus  | Yes |
| Proof of work | ✔️ |
| native currency | ✔️ |
| Network  | ✔️ |
| Transaction Script & UTXO | NO |
| Transaction inputs & outputs  | State transitions |
| Unspent transaction output (UTXO) set | Account Based |
| Script language  | 7 languages  |

---

Виталик создал Эфир полным по Тьюрингу, что означает можно написать абсолютно любую форму программы, можно использовать любую логику – код Эфириума очень гибок благодаря широкому функционалу.

Рассмотрим основные древа Меркла, которые как раз хранятся в шапке блока.

- Сами транзакции, которые по своей сути не транзакции – они называются изменением состояния
- Также есть само состояние
- Хранилище, которое непосредственно связано с каждым единым аккаунтом на блокчейн Эфириум. Там также хранятся квитанции для каждого изменения состояния

Эфириум не позволяет использовать ASIC, чтобы сделать майнинг более децентрализованным и большие компании не забирали весь доход себе.

Более детально сравнение технологического дизайна Биткоина и Эфириума приведено в таблице.

Bitcoin vs Ethereum Design

| Design | BitCoin | ↔️ | Ethereum |
| --- | --- | --- | --- |
| Founder | Satoshi Nakamoto | ↔️ | Vatalik Buterin  |
| Genesis | Jan 2009 | ↔️ | Jul 2015 |
| Code | Non turing (script) | ↔️ | Turing complete (solidity,
serpent, LLL or Mutan)  |
| Ledger | UTXO - Transaction | ↔️ | State - Account Based |
| Merkle Trees | Transactions  | ↔️ | Transactions, State, Storage, 
Receipts (w/nonces) |
| Block Time | 10 minutes | ↔️ | 14 seconds |
| Consensus | Proof of work | ↔️ | Proof of work |
| Hash Function | SHA 256 | ↔️ | Ethash |
| currency | Bitcoin | ↔️ | ETH |
| Mining | ASIC | ↔️ | GPU |
| Hashrate | 54 Exahash/S | ↔️ | 260 Terahash/S |
| Pre-sale | None | ↔️ | ICO & prerelease of 72 m ETH |
| rewards | 12.5 BTC/block | ↔️ | 3 ETH/block |
| monetary police | 1/2s every 210,000 blocks (4 yrs) | ↔️ | Fixed, but changes by updates
(was 5/block; proposal to 2) |

---

### Что такое децентрализованные приложения? Каково было использование и почему ни одно DApps еще не получило широкого распространения среди потребителей?

Всего торговая палата видит 12 возможных вариантов использования смарт-контрактов.

Интересно, что ни одно из этих направлений не начало развиваться (на момент 2018 года).

- Digital Identity – Цифровая идентификация
- Securities – Ценные бумаги
- Derivatives – Производный финансовый инструмент, дериватив
- Mortgages – Ипотека
- Supply Chain – Управление цепочками поставок
- Clinical Trials – Реестр клинических испытаний
- Records – Учет
- Trade Finance – Торговое финансирование
- Financial Data – Финансовая отчетность
- Land Title – Право собственности на землю
- Auto insurance – Автострахование
- Cancer research – Исследования рака

Если посмотреть на DApps, которые работают на децентрализованном блокчейне, у них как правило есть свой собственный нативный токен, но это не обязательное правило. 

На данный момент из приложений работают азартные игры, игры, обменники и различные финансовые приложения. Самые активные DApps – сайт для азартных игр, на котором всего лишь 1500 пользователей в сутки (2018 год), что достаточно скромная цифра в экономическом плане, на обычных приложениях зачастую показатели в сотни тысяч раз больше.

С другой стороны эти платформы и подобная ситуация привели к первоначальному предложению монет, то есть сбор средств на развитие какой-либо сети. В таком процессе продаются токены и, как правило, продаются до того, как их можно использовать. Здесь токен как раз нативное платежное средство. Также на данных платформах разработка открыта, но она высоко централизована. А создатель проектов забирает себе пару токенов, что является его преимуществом. По большей части все токены взаимозаменяемые и переводимые, то есть можно попробовать положить и продать на какой-либо бирже.

Вы можете задаться вопросом – чем обоснована цена токенов?

Как правило, в основе лежит ожидание, что в будущем токены будут работать и будут стоить дороже, за счет чего можно будет обогатиться.

Другой вариант – CryptoKitties – их можно собирать, что и делает их ценными на данный момент. 

Также на вопрос, почему почти ни одно DApps не получило широкого распространения может ответить ICO.

Всего за историю было собрано примерно 28 миллиардов долларов на ICO (2018 год). Среди них можно выделить самые крупные – EOS и Telegram.

Также всего было примерно 4500 различных ICO, которые пытались собрать деньги, но у большинства не получилось. Также есть статистика, что многие вообще не смогли собрать ни копейки, но 2 или 3 тысячи  ICO были прибыльны. Правда среди них более чем половина сегодня уже не работает – 59% всех ICO не проживают 9 месяцев. А между 1/4 и 3/4 всех ICO - скамы (мошенники).

Более подробно про ICO можно почитать здесь: [ссылка на Лену]

## Законодательная часть

Автор Ларри Лэссик

Лестер Лоуренс Лессиг третий — американский общественный активист, профессор права в Гарвардском университете.

В данной части раскроем тему недопонимание природы закона, так как это напрямую связано со смарт-контрактами. 

Что такое контракты?

По словам основы законов о контрактах – это

Обещание или действие, которое выдается в обмен на другое общение или действие 

- Общение в замен на другое обещание
- Обещание за действие
- Действие за обещание
- Действие за действие

На последнее как раз ориентируется смарт-контракт.

Рассмотрим четыре пункта о смарт-контрактах.

1 Рассмотрим пример автомата для еды – это контракта формата действие за действие – мы платим и мы получаем банку газировки пепси и также мы пониманием, что есть механизм который ответственен за этот результат.

А какие условия у этого контракта? Есть очевидные внешние условия – мы получим за 100 рублей банку колы – и много внутренних условий, например, что это будет точно банка колы, а не подделка и она не вызовет проблем со здоровьем – конечно это условие не прописано снаружи аппарата, однако это условие контракта есть, и оно создается отдельно с законодательством и принимается.

2 Неочевидные или подразумевающиеся условия

Что они значат?

Если подразумевающиеся условия применяются законодательной системой то это значит, что у законодательной системы есть интерес в вашем контракте.

То есть законодатель не незаинтересован в вашем контракте.

Это важно, чтобы понимать, что есть всегда есть две стороны – тот кто дает обещание и тот который получает с него выгоду – и есть третья партия - государство.

То есть государство всегда в центре контракта, и оно может проверить некоторые или множество из этих контрактов и потом принять решение нравятся такие условия или же нет. Если такие условия не нравятся, то государство может либо воздержать вас от исполнения такого контракта, либо даже наказать вас за такой контракт.

Например, государству интересно то 

- какой у вас тип контракта
- эффект контракта
- условия вашего контракта
- налоги

То есть тут важно разбить миф о том, что контракт это соглашение двух сторон – на самом деле государство здесь также играет роль и всегда будет иметь свое слово.

Из чего вытекает вывод: контракт имеет ценность, когда его можно ввести в законодательные рамки.

В чем проблема в таком случае в новых технологиях? Они бросают вызов закону. Самый большой страх в смарт-контрактах – они могут создать транзакцию, которая может спрятаться от государственной политики, что в свою очередь создает очень большой вопрос для законодателей, что они могут сделать чтобы вмешаться.

3 В чем суть законодательства о контрактах

Суть этого законодательства не в том, чтобы убрать риск, а в том чтобы найти у кого риск, чтобы каждый из участников контракта мог построить свою позицию относительного этого риска.

Но распределение рисков важно только, тогда когда у нас есть система для отслеживания нарушений условий контракта. И обычно мы ожидаем что это законодательная система.

Контракты будут работать только тогда, когда у нас есть хорошая юридическая законодательная система, которая будет работать – она должна давать преимущества заключения контрактов внутри этой системы.

И если мы подумаем об этом, как о репрезентациии хорошей законодательной системы, и представим, что страны первого мира имеют такую систему, и сравним со странами третьего мира, у которых не такая развитая законодательная система, то увидим, что у стран первого мир лучше условия, потому что у них есть законодательная инфраструктура, которая позволит работать распределению рисков благодаря, чему  будут доступны различные рыночные транзакции, которые в ином случае не произошли бы. 

Однако, если представить новую инфраструктуру, например, блокчейн, которая будет работать исключительно на программном коде, и не потребуется законодатель, чтобы она работала, то таким образом такая структура сможет заменить неработающие законодательства или недостаточно развитые (например, третьего мира).

Получается структура, которая необходима контрактам, для того чтобы они могли исполняться и работать даже за более низкую стоимость. Такая система позволила бы людям, которые не пользовались некоторыми контрактами, получить то, что им нужно, используя новые доступные контракты.

То есть ключевой момент заключается в том, что суть этой технологии сможет заменить неработающую законодательную систему, предоставить инфраструктуру для неразвитой законодательной системы.

Стоит упомянуть и некоторые сложности – как смарт-контракт будет работать в жизни. Ведь мы не можем создать подобный смарт-контракт, привязанный к реальному миру, так как блокчейн не может подтвердить в реальном мире выполнение условий договора.

Другая ключевая возможность, кроме инфраструктуры – выполнять такие контракты, для которых стоимость транзакции сейчас была бы слишком высокой, где стоимость транзакции может быть двух типов: стоимость системы и стоимость исполнения самого контракта с транзакцией.

4 Проблема с прозрачностью

Сейчас есть двусмысленности и неоднозначности при составлении и исполнении контрактов, но если записать контракты в определенный код в смарт-контракте, тогда была бы уверенность в каждом возможном исходе. Но тогда возникает некоторая проблема.

Неизвестность может быть очень ценной.

Представьте очень сложное древо решений, который могло просчитать все ситуации, которые могли бы произойти с нашей сделкой.

И в таких ситуациях смарт-контракт может сделать дороже, а не дешевле контракт, так как если то, что мы хотим по контракту, размыто и имеет много неточностей, и мы решим уточнить эти все неточности заранее, то вероятно вообще не заключим этот контракт, потому что для нас это окажется невыгодно. В тоже время не зная всех-всех рисков, даже тех которые составляли 0,00001% мы охотнее заключим договор, а чтобы уточнить какие-то размытости вероятнее обратимся к третьему лицу – например, судье. 

То есть для тех ситуаций, где спектр возможных вариантов событий небольшой – действительно смарт-контракты позволяют сделать транзакцию более выгодной. Смарт-контракты работают тогда, когда у нас есть четкий план всех ситуаций. С другой стороны возникает концептуальный вопрос, как поступать со смарт-контрактами, когда то, что мы хотим получить по условию договора, само по себе размыто. И если какое-то условие в контракте требует дополнительной предварительной спецификации, то таких контрактов по итогу будет очень мало, так как стоимость создания будет превышать их преимущества. То есть вложения в контракт будут выше его отдачи.

По итогу мы не можем пока включить размытые понятия в смарт-контракты, в отличие от законодательной системы.